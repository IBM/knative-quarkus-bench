# Graph-mst Project

This project is a Quarkus port of 502.graph-mst of
[SeBS: Serverless Benchmark Suite](https://github.com/spcl/serverless-benchmarks).

This application generates an undirected graph of a given number of nodes and
computes a minimum spanning tree (MST) by using Prim's algorithm.

The input graph is generated by using Barab&aacute;si-Albert graph generator.
This application uses [JGraphT](https://jgrapht.org/) for generating and handling graphs.


## Preparing Input Data

The input to this application is the number of nodes of a generated graph.
No input file is required.


## Building and Running the Application

Build project as described in [the README at the top level](../../README.md) as necessary.

Then, the application can run as a local HTTP server.
To run the stand-alone Java version:
```shell
java -jar target/quarkus-app/quarkus-run.jar
```
To run the stand-alone native version:
```shell
target/graph-mst-1.0.0-SNAPSHOT-runner
```


## Sending a Request to the Application

This application receives following parameters from POST data in JSON format:

|Name         |Value                 |Required?(&starf;)|Default|Default is customizable?|
|:-----------:|:------------------------------------|:-:|:-----:|:----------------------:|
|size         |Number of nodes of a generated graph | N |    10 | N |
|debug        |Flag if MST is printed out           | N | false | N |

&starf; Although both `size` and `debug` can be ommitted, an object still needs to be sent
as a POST data, as `-d '{}'`.

The `size` parameter can be __an integer__ or __*a data size name*__ listed below:
|Name  |Number of nodes|
|:----:|:-------------:|
|test  |            10 |
|tiny  |           100 |
|small |         1,000 |
|medium|        10,000 |
|large |       100,000 |


For example:
```shell
curl http://localhost:8080/graph-mst \
     -X POST \
     -H 'Content-Type: application/json' \
     -d '{"size":"small"}'
```
generates an undirected graph of 1,000 nodes and computes an MST, but does not return
the resulting MST because `debug` parameter is `false`.

Note that returning the resulting MST can take much longer than generating a graph and
computing MST.  Quarkus runtime serializes the returned MST into JSON, but this is
a time-consuming process.
Therefore, skipping returning the MST is recommended for evaluation of performance.

To send a request to a Knative eventing service,
```shell
curl http://<broker-endpoint>:<port>/ \
     -v \
     -X POST \
     -H 'Ce-Id: 1234' \
     -H 'Ce-Source: curl' \
     -H 'Ce-Specversion: 1.0' \
     -H 'Ce-Type: graph-mst' \
     -H 'Content-Type: application/json' \
     -d '{"size":30, "debug":"true"}'
```
This request creates a graph of 30 nodes, computes an MST, and returns the MST
as a JSON string because `debug` parameter is set to `true`.


## Customizing the Default Value of Input Parameters

This application takes all the input parameters from the POST data, and there is no parameter
that can be customized via environment variables or `application.properties`
